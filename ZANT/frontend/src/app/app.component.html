<div class="app-container">
  <div class="header">
    <h1>SSZD</h1>
    <div class="header-actions">
      <button
        class="contrast-toggle"
        (click)="toggleContrast()"
        [attr.aria-pressed]="isHighContrast"
        aria-label="Prze≈ÇƒÖcz tryb wysokiego kontrastu"
        title="Prze≈ÇƒÖcz tryb wysokiego kontrastu">
        <span class="contrast-icon" aria-hidden="true">‚óê</span>
        <span class="contrast-text">{{ isHighContrast ? 'Kontrast standardowy' : 'Wysoki kontrast' }}</span>
      </button>
      <button
        class="settings-toggle"
        (click)="toggleSettingsMenu()"
        aria-label="Ustawienia modelu AI"
        title="Wyb√≥r modelu AI">
        <span class="settings-icon" aria-hidden="true">‚öô</span>
      </button>
      <button
        class="user-toggle"
        (click)="toggleUserMenu()"
        aria-label="Menu u≈ºytkownika"
        title="U≈ºytkownik">
        <span class="user-icon" aria-hidden="true">üë§</span>
        <span class="user-name">{{ userInfo?.username }}</span>
      </button>
    </div>
  </div>

  <div class="user-menu" *ngIf="showUserMenu" (click)="closeUserMenu()">
    <div class="user-menu-content" (click)="$event.stopPropagation()">
      <h2>Profil u≈ºytkownika</h2>
      <div class="user-info">
        <p><strong>U≈ºytkownik:</strong> {{ userInfo?.username }}</p>
        <p *ngIf="userInfo?.email"><strong>Email:</strong> {{ userInfo?.email }}</p>
        <p *ngIf="userInfo?.firstName || userInfo?.lastName">
          <strong>Imiƒô i nazwisko:</strong> {{ userInfo?.firstName }} {{ userInfo?.lastName }}
        </p>
        <p><strong>Role:</strong></p>
        <ul class="roles-list">
          <li *ngFor="let role of userInfo?.roles">{{ role }}</li>
        </ul>
      </div>
      <button class="logout-button" (click)="logout()">Wyloguj</button>
      <button class="close-button" (click)="closeUserMenu()">Zamknij</button>
    </div>
  </div>

  <div class="settings-menu" *ngIf="showSettingsMenu" (click)="closeSettingsMenu()">
    <div class="settings-menu-content" (click)="$event.stopPropagation()">
      <h2>Wyb√≥r modelu AI</h2>
      <div class="ai-provider-options">
        <label class="radio-option">
          <input
            type="radio"
            name="ai-provider"
            value="pllum"
            [checked]="currentProvider === 'pllum'"
            (change)="selectProvider('pllum')"
            aria-label="Model Plum">
          <span>Plum</span>
        </label>
        <label class="radio-option">
          <input
            type="radio"
            name="ai-provider"
            value="gemini"
            [checked]="currentProvider === 'gemini'"
            (change)="selectProvider('gemini')"
            aria-label="Model Gemini">
          <span>Gemini</span>
        </label>
      </div>
      <button class="close-button" (click)="closeSettingsMenu()">Zamknij</button>
    </div>
  </div>

  <div class="content">
    <router-outlet></router-outlet>
  </div>
</div>
